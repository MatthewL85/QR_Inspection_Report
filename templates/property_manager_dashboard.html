{% extends 'base.html' %}
{% block content %}
  <div class="dashboard-container">
    <h2>ğŸ¢ Property Manager Dashboard</h2>
    <p>Welcome, {{ session['user']['username'] }} ({{ session['user']['company'] }})</p>
    <a href="{{ url_for('logout') }}">Logout</a>
  </div>

  <div class="dashboard-section">
    <h4>Your Equipment</h4>
    {% if equipment %}
      <ul>
        {% for eq in equipment %}
          <li><strong>{{ eq['name'] }}</strong> ({{ eq['id'] }}) â€” {{ eq['location'] }}</li>
        {% endfor %}
      </ul>
    {% else %}
      <p>You haven't added any equipment yet.</p>
    {% endif %}
  </div>

  <div class="dashboard-section">
    <h4>ğŸ§¾ Inspection Logs (for your clients)</h4>
    <a href="{{ url_for('pm_inspections') }}" class="btn btn-primary">ğŸ“‹ View Inspection Logs</a>
  </div>    

  <div class="dashboard-section">
    <h4>âš ï¸ Missed Inspections</h4>
    <a href="{{ url_for('pm_alerts') }}" class="btn btn-warning">View Missed Inspections</a>
  </div>

  <div class="dashboard-section">
    <h4>âš ï¸ Missed Maintenance Tasks</h4>
    {% if missed_tasks %}
      <ul>
        {% for task in missed_tasks %}
        <li style="color: red;">
          âš ï¸ {{ task.title }} ({{ task.client }}) - Scheduled for {{ task.date }} [{{ task.type }}]
        </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No missed tasks â€” you're up to date! âœ…</p>
    {% endif %}
  </div>

  <div class="dashboard-section">
    <h4>ğŸ“… Maintenance Planner</h4>
    <a href="{{ url_for('property_manager_maintenance_planner') }}" class="btn btn-info">ğŸ—“ï¸ View Maintenance Calendar</a>
  </div>

  <div class="text-center mt-4">
    <a href="{{ url_for('show_dashboard') }}" class="btn btn-secondary">â¬… Return to Dashboard</a>
  </div>
{% endblock %}
